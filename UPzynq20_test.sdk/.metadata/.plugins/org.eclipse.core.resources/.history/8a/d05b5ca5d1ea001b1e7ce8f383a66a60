/*
 * logical_functions.c
 *
 *  Created on: 22 èþë. 2021 ã.
 *      Author: stud
 */

#include "logical_functions.h"

#include "xparameters.h"
#include "xgpio.h"
#include "xplatform_info.h"
#include "xuartps.h"
//#include "xil_exception.h"
#include "xil_printf.h"
#include "project_parameters.h"
#include "test_functions.h"
#include "module_uart_RS485.h"
#include "module_uart_SET12.h"
#include "test_functions_PS_MIO.h"
#include "current_system_status.h"


int latch_start = 0;

void load_function(int count){
	if (count == 0) {
		set_array_current_status_int(87, 0);
		preparing_message_RS485(2, 16, 1, 100, 200);
		set_array_current_status_bool(544, 0);
		preparing_message_RS485(2, 15, 544, 1, 2);
	}
	else {
		if (latch_start == 0) {
			if (count < 11) {
				set_array_current_status_bool(544, 0);
				preparing_message_RS485(2, 15, 544, 1, 2);
				set_array_current_status_int(87, count);
				preparing_message_RS485(2, 16, 1, 100, 200);
			}
			else {
				latch_start = 1;
			}
		}
	}
}


